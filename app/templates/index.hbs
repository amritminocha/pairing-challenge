<h2 class="text-muted p-2">Inventory Tracker</h2>

<div class="inventory-tracker p-3">
  <div class="d-flex">
    <table class="table table-hover w-100">
      <thead>
        <tr>
          <th scope="col" class="col-1">#</th>
          <th scope="col" class="col-2">Category</th>
          <th scope="col" class="">Name</th>
          <th scope="col" class="">Detail</th>
          <th scope="col" class="col-2">Value (USD)</th>
        </tr>
      </thead>
      <tbody>
        {{#each this.model as |item index|}}
          <tr>
            <th class="text-muted fw-light">{{index}}</th>
            <td class="text-capitalize">
              <FaIcon @icon={{item.itemDetail.icon}} class="me-1"/> {{item.category}}
            </td>
            <td>
              {{item.name}}
            </td>
            <td class="text-capitalize">{{item.itemDetail.detail}}</td>
            <td>{{item.currencyDisplay}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  <div class="inventory-buttons">
    <BsButton
      @type="primary"
      @onClick={{this.createNewItem}}
    >
      Add Item
    </BsButton>
  </div>
</div>

{{#if this.showAddModal}}
<BsModal
  @onSubmit={{this.submitNewItem}}
  @onHide={{this.closeModal}}
  @model={{this.selectedItem}}
  as |modal|>
  <BsForm as |form|>
  <modal.header>
    <h5 class="modal-title">New Item</h5>
  </modal.header>
  <modal.body>
    <form.element @controlType='text' @label='Name' @property="category" />
    <form.element @controlType='text' @label='Value' @property="value" />
    <div class="mb-3">
      <label class="form-label">Category</label>
      <BsButtonGroup @value={{this.selectedItem.category}} @type="radio" class="border w-100" @onChange={{this.createNewDetails}} as |bg|>
        <bg.button @type="light" @value='jewelry'>Jewelry</bg.button>
        <bg.button @type="light" @value='electronic'>Electronic</bg.button>
        <bg.button @type="light" @value='other'>Other</bg.button>
      </BsButtonGroup>
    </div>

    {{#if this.selectedItem.itemDetail}}
      {{log this.selectedItem.itemDetail}}
      {{#if (eq this.selectedItem.category 'jewelry')}}
        <form.element @controlType='text' @label='Material' @value={{this.selectedItem.itemDetail.material}} @onChange={{fn (mut this.selectedItem.itemDetail.material)}}/>
      {{else if (eq this.selectedItem.category 'electronic')}}
        <form.element @controlType='text' @label='Serial Number' @value={{this.selectedItem.itemDetail.serialNumber}} @onChange={{fn (mut this.selectedItem.itemDetail.serialNumber)}}/>
      {{/if}}
    {{/if}}

  </modal.body>
  <modal.footer>
    <BsButton @onClick={{modal.close}}>Cancel</BsButton>
    <form.submitButton @onClick={{modal.submit}} @type="primary">Submit</form.submitButton>
  </modal.footer>
  </BsForm>
  </BsModal>
{{/if}}
